<!DOCTYPE html>
<html>
  <head>
    <style>
      html {
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      body {
        background-color: black;
        color: white;
        margin: 0;
      }

      footer {
        background-color: #252525;
        position: fixed;
        width: 100%;
        bottom: 0;
        left: 0;
        display: flex;
      }

      #datePanel {
        font-size: 15vw;
        font-weight: bold;
        margin: 0;
      }

      #title {
        display: flex;
        justify-content: center;
        font-size: 10vw;
        margin: 0;
      }

      div.centerBox {
        display: flex;
        flex-direction: column;
        justify-content: center;
      }
    </style>
  </head>

  <body>
    <div class="centerBox">
      <p id="title">時間</p>
      <p id="datePanel">00:00:00</p>
    </div>
    <footer>
      <form id="mode">
        <input type="radio" id="current_date_mode" name="mode" value="current_date_mode" checked />
        <label for="current_date_mode">現在時刻モード</label>
        <input type="radio" id="remainder_hour_mode" name="mode" value="remainder_hour_mode" />
        <label for="remainder_hour_mode">残り時間モード</label>
      </form>
      <input type="time" id="time_limit" />
    </footer>

    <script>
      // 現在の時刻を取得
      function getCrrentDate() {
        const currentDate = new Date();
        const currentHours = ("00" + currentDate.getHours()).slice(-2);
        const currentMinutes = ("00" + currentDate.getMinutes()).slice(-2);
        const currentSeconds = ("00" + currentDate.getSeconds()).slice(-2);
        const _currentDate = currentHours + ":" + currentMinutes + ":" + currentSeconds;
        return _currentDate;
      }

      // 残り時間の取得
      function getTimeLimit(){
        const _timeLimit = document.getElementById("time_limit");
        const _value = _timeLimit.value;
        const value = _value.split(":");
        let timeLimit = new Date();
        timeLimit.setHours(value[0]);
        timeLimit.setMinutes(value[1]);
        return timeLimit;
      }

      // 残り時間の計算
      function time_limit_calculation(){
        const currentDate = new Date();
        let timeLimit = currentDate.getTime() - getTimeLimit().getTime();
        const timeLimit_hours = currentDate.getHours() - getTimeLimit().getHours();
        const timeLimit_Minutes = currentDate.getMinutes() - getTimeLimit().getMinutes();
        const timeLimit_Seconds = currentDate.getSeconds()-getTimeLimit().getSeconds();
        console.log(currentDate.getSeconds());
        console.log(getTimeLimit().getSeconds());
        return timeLimit_hours + ":" + timeLimit_Minutes + ":" + timeLimit_Seconds;
      }

      // 時刻表示の更新
      function updateDatePanel(text) {
        const datePanel = document.getElementById("datePanel");
        datePanel.textContent = text;
      }

      //タイトルの更新
      function updateTitle(text) {
        const titlePanel = document.getElementById("title");
        titlePanel.textContent = text;
      }

      //全画面モードの切り替え
      function switchFullScreen() {
        if (!document.fullscreenElement) {
          document.documentElement.requestFullscreen();
        } else {
          document.exitFullscreen();
        }
      }

      function main() {
        // 表示モードのチェック
        const mode = document.getElementById("mode");
        const value = mode.elements["mode"].value;
        if (value == "current_date_mode") {
          // 現在時刻表示モード
          updateTitle("時間");
          updateDatePanel(getCrrentDate());
        }
        if (value == "remainder_hour_mode") {
          // 残り時間表示モード
          updateTitle("残り");
          updateDatePanel(time_limit_calculation());
        } else {
        }
      }

      // 定期的な時刻表示の更新
      setInterval("main()", 1000);

      // キーストロークの監視
      document.addEventListener(
        "keydown",
        (event) => {
          if (event.key === "f") {
            switchFullScreen();
          }
        },
        false
      );
    </script>
  </body>
</html>
